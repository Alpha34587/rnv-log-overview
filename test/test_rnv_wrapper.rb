require 'test/unit'
require 'xlo'

class TestRnvWrapper < Test::Unit::TestCase
  attr_accessor :xlo, :expected

  def setup
    @xlo = Xlo.new
    @expected = "test/resources/xml/1.xml test/resources/xml/1.xml:8:3: error: element http://www.tei-c.org/ns/1.0^publicationStt not allowed required: \telement http://www.tei-c.org/ns/1.0^publicationStmt allowed: \telement http://www.tei-c.org/ns/1.0^editionStmt \telement http://www.tei-c.org/ns/1.0^extent test/resources/xml/1.xml:12:3: error: incomplete content required: \telement http://www.tei-c.org/ns/1.0^publicationStmt allowed: \telement http://www.tei-c.org/ns/1.0^editionStmt \telement http://www.tei-c.org/ns/1.0^extent test/resources/xml/1.xml:24:8: error: element http://www.tei-c.org/ns/1.0^surnae not allowed required: \tafter test/resources/xml/1.xml:56:7: error: attribute ^type not allowed required: \tafter test/resources/xml/1.xml:57:7: error: attribute ^type not allowed required: \tafter test/resources/xml/1.xml:66:4: error: attribute ^type not allowed required: \telement http://www.tei-c.org/ns/1.0^term \telement http://www.tei-c.org/ns/1.0^list test/resources/xml/1.xml:69:7: error: attribute http://www.w3.org/XML/1998/namespace^id with invalid value \"12\" required: \tdata http://www.w3.org/2001/XMLSchema-datatypes^ID test/resources/xml/1.xml:72:7: error: attribute http://www.w3.org/XML/1998/namespace^id with invalid value \"12\" required: \tdata http://www.w3.org/2001/XMLSchema-datatypes^ID test/resources/xml/1.xml:332:8: error: attribute ^type not allowed required: \tafter test/resources/xml/1.xml:333:8: error: attribute ^type not allowed required: \tafter test/resources/xml/1.xml:350:6: error: unfinished content of element http://www.tei-c.org/ns/1.0^monogr required: \telement http://www.tei-c.org/ns/1.0^imprint allowed: \telement http://www.tei-c.org/ns/1.0^title \telement http://www.tei-c.org/ns/1.0^ptr \telement http://www.tei-c.org/ns/1.0^ref \telement http://www.tei-c.org/ns/1.0^idno \telement http://www.tei-c.org/ns/1.0^textLang \telement http://www.tei-c.org/ns/1.0^author \telement http://www.tei-c.org/ns/1.0^editor \telement http://www.tei-c.org/ns/1.0^meeting \telement http://www.tei-c.org/ns/1.0^respStmt \telement http://www.tei-c.org/ns/1.0^availability \telement http://www.tei-c.org/ns/1.0^note \telement http://www.tei-c.org/ns/1.0^witDetail \telement http://www.tei-c.org/ns/1.0^edition test/resources/xml/1.xml:373:7: error: incomplete content required: \telement http://www.tei-c.org/ns/1.0^title allowed: \telement http://www.tei-c.org/ns/1.0^author \telement http://www.tei-c.org/ns/1.0^editor \telement http://www.tei-c.org/ns/1.0^meeting \telement http://www.tei-c.org/ns/1.0^respStmt test/resources/xml/1.xml:376:8: error: attribute ^type not allowed required: \tafter test/resources/xml/1.xml:395:32: error: invalid data or text not allowed test/resources/xml/1.xml:399:8: error: attribute ^type not allowed required: \tafter test/resources/xml/1.xml:422:8: error: attribute ^type not allowed required: \tafter test/resources/xml/1.xml:423:8: error: attribute ^type not allowed required: \tafter test/resources/xml/1.xml:446:8: error: attribute ^type not allowed required: \tafter test/resources/xml/1.xml:447:8: error: attribute ^type not allowed required: \tafter test/resources/xml/1.xml:465:8: error: attribute ^type not allowed required: \tafter test/resources/xml/1.xml:466:8: error: attribute ^type not allowed required: \tafter test/resources/xml/1.xml:496:8: error: attribute ^type not allowed required: \tafter test/resources/xml/1.xml:497:8: error: attribute ^type not allowed required: \tafter test/resources/xml/1.xml:528:8: error: attribute ^type not allowed required: \tafter test/resources/xml/1.xml:529:8: error: attribute ^type not allowed required: \tafter test/resources/xml/1.xml:559:8: error: attribute ^type not allowed required: \tafter test/resources/xml/1.xml:560:8: error: attribute ^type not allowed required: \tafter test/resources/xml/1.xml:584:8: error: attribute ^type not allowed required: \tafter test/resources/xml/1.xml:585:8: error: attribute ^type not allowed required: \tafter test/resources/xml/1.xml:609:8: error: attribute ^type not allowed required: \tafter test/resources/xml/1.xml:610:8: error: attribute ^type not allowed required: \tafter test/resources/xml/1.xml:627:8: error: attribute ^type not allowed required: \tafter test/resources/xml/1.xml:628:8: error: attribute ^type not allowed required: \tafter test/resources/xml/1.xml:647:8: error: attribute ^type not allowed required: \tafter test/resources/xml/1.xml:671:8: error: attribute ^type not allowed required: \tafter test/resources/xml/1.xml:700:31: error: invalid data or text not allowed test/resources/xml/1.xml:704:8: error: attribute ^type not allowed required: \tafter test/resources/xml/1.xml:725:8: error: attribute ^type not allowed required: \tafter test/resources/xml/1.xml:726:8: error: attribute ^type not allowed required: \tafter test/resources/xml/1.xml:757:6: error: unfinished content of element http://www.tei-c.org/ns/1.0^monogr required: \telement http://www.tei-c.org/ns/1.0^title allowed: \telement http://www.tei-c.org/ns/1.0^author \telement http://www.tei-c.org/ns/1.0^editor \telement http://www.tei-c.org/ns/1.0^meeting \telement http://www.tei-c.org/ns/1.0^respStmt test/resources/xml/1.xml:773:7: error: incomplete content required: \telement http://www.tei-c.org/ns/1.0^title allowed: \telement http://www.tei-c.org/ns/1.0^author \telement http://www.tei-c.org/ns/1.0^editor \telement http://www.tei-c.org/ns/1.0^meeting \telement http://www.tei-c.org/ns/1.0^respStmt test/resources/xml/1.xml:826:8: error: attribute ^type not allowed required: \tafter test/resources/xml/1.xml:827:8: error: attribute ^type not allowed required: \tafter test/resources/xml/1.xml:858:6: error: unfinished content of element http://www.tei-c.org/ns/1.0^monogr required: \telement http://www.tei-c.org/ns/1.0^title allowed: \telement http://www.tei-c.org/ns/1.0^author \telement http://www.tei-c.org/ns/1.0^editor \telement http://www.tei-c.org/ns/1.0^meeting \telement http://www.tei-c.org/ns/1.0^respStmt test/resources/xml/1.xml:866:8: error: attribute ^type not allowed required: \tafter test/resources/xml/1.xml:867:8: error: attribute ^type not allowed required: \tafter test/resources/xml/1.xml:891:8: error: attribute ^type not allowed required: \tafter test/resources/xml/1.xml:892:8: error: attribute ^type not allowed required: \tafter test/resources/xml/1.xml:921:8: error: attribute ^type not allowed required: \tafter test/resources/xml/1.xml:922:8: error: attribute ^type not allowed required: \tafter test/resources/xml/1.xml:940:8: error: attribute ^type not allowed required: \tafter test/resources/xml/1.xml:941:8: error: attribute ^type not allowed required: \tafter test/resources/xml/1.xml:978:31: error: invalid data or text not allowed test/resources/xml/1.xml:982:8: error: attribute ^type not allowed required: \tafter test/resources/xml/1.xml:997:22: error: invalid data or text not allowed test/resources/xml/1.xml:1016:22: error: invalid data or text not allowed test/resources/xml/1.xml:1047:8: error: attribute ^type not allowed required: \tafter test/resources/xml/1.xml:1048:8: error: attribute ^type not allowed required: \tafter test/resources/xml/1.xml:1094:8: error: attribute ^type not allowed required: \tafter test/resources/xml/1.xml:1095:8: error: attribute ^type not allowed required: \tafter test/resources/xml/1.xml:1111:8: error: attribute ^type not allowed required: \tafter test/resources/xml/1.xml:1112:8: error: attribute ^type not allowed required: \tafter test/resources/xml/1.xml:1140:8: error: attribute ^type not allowed required: \tafter test/resources/xml/1.xml:1141:8: error: attribute ^type not allowed required: \tafter test/resources/xml/1.xml:1170:8: error: attribute ^type not allowed required: \tafter test/resources/xml/1.xml:1171:8: error: attribute ^type not allowed required: \tafter test/resources/xml/1.xml:1217:8: error: attribute ^type not allowed required: \tafter test/resources/xml/1.xml:1218:8: error: attribute ^type not allowed required: \tafter test/resources/xml/1.xml:1248:8: error: attribute ^type not allowed required: \tafter test/resources/xml/1.xml:1283:8: error: attribute ^type not allowed required: \tafter test/resources/xml/1.xml:1329:31: error: invalid data or text not allowed test/resources/xml/1.xml:1333:8: error: attribute ^type not allowed required: \tafter test/resources/xml/1.xml:1357:31: error: invalid data or text not allowed test/resources/xml/1.xml:1361:8: error: attribute ^type not allowed required: \tafter test/resources/xml/1.xml:1377:22: error: invalid data or text not allowed test/resources/xml/1.xml:1381:8: error: attribute ^type not allowed required: \tafter test/resources/xml/1.xml:1382:8: error: attribute ^type not allowed required: \tafter test/resources/xml/1.xml:1418:31: error: invalid data or text not allowed test/resources/xml/1.xml:1422:8: error: attribute ^type not allowed required: \tafter error: some documents are invalid"
  end

  def test_return_value
    observed =  @xlo.rnv_wrapper("test/resources/schema/tei-all.rnc", "test/resources/xml/1.xml").join(" ")
    assert_equal(@expected, observed, 'Assertion was false.')
  end
end
